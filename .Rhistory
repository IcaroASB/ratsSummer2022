dfQueens <- df %>% filter(Borough == "QUEENS")
write.csv(dfBronx, "C:\\Users\\Admin\\Desktop\\dfBronx.csv", row.names=FALSE)
write.csv(dfBrooklyn, "C:\\Users\\Admin\\Desktop\\dfBrooklyn.csv", row.names=FALSE)
write.csv(dfManhattan, "C:\\Users\\Admin\\Desktop\\dfManhattan.csv", row.names=FALSE)
write.csv(dfStatenIsland, "C:\\Users\\Admin\\Desktop\\dfStatenIsland.csv", row.names=FALSE)
write.csv(dfQueens, "C:\\Users\\Admin\\Desktop\\dfQueens.csv", row.names=FALSE)
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_brooklyn <- function(year) {
lots_year_1 <- dfBrooklyn %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBrooklyn %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_brooklyn),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
library("tidyverse")
calls <- read_csv("nyc_rodent_compliants.csv")
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
lots_year_1 <- df %>% filter(Year == "14") %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == "15") %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
capture_recapture <- function(year) {
lots_year_1 <- df %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
library(ggplot2)
ggplot(df, aes(fill= Borough, y = count , x = Year)) +
geom_bar(position = "stack", stat = "identity")
lots_year_18 <- df %>% filter(Year == "18") %>% select(BBL, Borough, Zip)
lots_year_19 <- df %>% filter(Year == "19") %>% select(BBL, Borough, Zip)
common_lots_18_19 <- inner_join(lots_year_18, lots_year_19)
dfManhattan <- df %>% filter(Borough == "MANHATTAN")
dfBronx <- df %>% filter(Borough == "BRONX")
dfBrooklyn <- df %>% filter(Borough == "BROOKLYN")
dfStatenIsland <- df %>% filter(Borough == "STATEN ISLAND")
dfQueens <- df %>% filter(Borough == "QUEENS")
write.csv(dfBronx, "C:\\Users\\Admin\\Desktop\\dfBronx.csv", row.names=FALSE)
write.csv(dfBrooklyn, "C:\\Users\\Admin\\Desktop\\dfBrooklyn.csv", row.names=FALSE)
write.csv(dfManhattan, "C:\\Users\\Admin\\Desktop\\dfManhattan.csv", row.names=FALSE)
write.csv(dfStatenIsland, "C:\\Users\\Admin\\Desktop\\dfStatenIsland.csv", row.names=FALSE)
write.csv(dfQueens, "C:\\Users\\Admin\\Desktop\\dfQueens.csv", row.names=FALSE)
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_brooklyn <- function(year) {
lots_year_1 <- dfBrooklyn %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBrooklyn %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_brooklyn),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
View(df)
View(calls)
View(df)
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- order(df(Year),)
View(df)
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(Year)]
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(Zip)]
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(Zip),]
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
View(df)
library("tidyverse")
calls <- read_csv("nyc_rodent_compliants.csv")
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
lots_year_1 <- df %>% filter(Year == "14") %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == "15") %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
capture_recapture <- function(year) {
lots_year_1 <- df %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
library(ggplot2)
ggplot(df, aes(fill= Borough, y = count , x = Year)) +
geom_bar(position = "stack", stat = "identity")
lots_year_18 <- df %>% filter(Year == "18") %>% select(BBL, Borough, Zip)
lots_year_19 <- df %>% filter(Year == "19") %>% select(BBL, Borough, Zip)
common_lots_18_19 <- inner_join(lots_year_18, lots_year_19)
dfManhattan <- df %>% filter(Borough == "MANHATTAN")
dfBronx <- df %>% filter(Borough == "BRONX")
dfBrooklyn <- df %>% filter(Borough == "BROOKLYN")
dfStatenIsland <- df %>% filter(Borough == "STATEN ISLAND")
dfQueens <- df %>% filter(Borough == "QUEENS")
write.csv(dfBronx, "C:\\Users\\Admin\\Desktop\\dfBronx.csv", row.names=FALSE)
write.csv(dfBrooklyn, "C:\\Users\\Admin\\Desktop\\dfBrooklyn.csv", row.names=FALSE)
write.csv(dfManhattan, "C:\\Users\\Admin\\Desktop\\dfManhattan.csv", row.names=FALSE)
write.csv(dfStatenIsland, "C:\\Users\\Admin\\Desktop\\dfStatenIsland.csv", row.names=FALSE)
write.csv(dfQueens, "C:\\Users\\Admin\\Desktop\\dfQueens.csv", row.names=FALSE)
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_brooklyn <- function(year) {
lots_year_1 <- dfBrooklyn %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBrooklyn %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_brooklyn),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
df <- filter(Year != 22, Year >= 14)
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
df <- filter(df, Year != 22, Year >= 14)
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
library("tidyverse")
calls <- read_csv("nyc_rodent_compliants.csv")
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
df <- filter(df, Year != 22, Year >= 14)
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
lots_year_1 <- df %>% filter(Year == "14") %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == "15") %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
capture_recapture <- function(year) {
lots_year_1 <- df %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
library(ggplot2)
ggplot(df, aes(fill= Borough, y = count , x = Year)) +
geom_bar(position = "stack", stat = "identity")
lots_year_18 <- df %>% filter(Year == "18") %>% select(BBL, Borough, Zip)
lots_year_19 <- df %>% filter(Year == "19") %>% select(BBL, Borough, Zip)
common_lots_18_19 <- inner_join(lots_year_18, lots_year_19)
dfManhattan <- df %>% filter(Borough == "MANHATTAN")
dfBronx <- df %>% filter(Borough == "BRONX")
dfBrooklyn <- df %>% filter(Borough == "BROOKLYN")
dfStatenIsland <- df %>% filter(Borough == "STATEN ISLAND")
dfQueens <- df %>% filter(Borough == "QUEENS")
write.csv(dfBronx, "C:\\Users\\Admin\\Desktop\\dfBronx.csv", row.names=FALSE)
write.csv(dfBrooklyn, "C:\\Users\\Admin\\Desktop\\dfBrooklyn.csv", row.names=FALSE)
write.csv(dfManhattan, "C:\\Users\\Admin\\Desktop\\dfManhattan.csv", row.names=FALSE)
write.csv(dfStatenIsland, "C:\\Users\\Admin\\Desktop\\dfStatenIsland.csv", row.names=FALSE)
write.csv(dfQueens, "C:\\Users\\Admin\\Desktop\\dfQueens.csv", row.names=FALSE)
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_brooklyn <- function(year) {
lots_year_1 <- dfBrooklyn %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBrooklyn %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_brooklyn),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
View(df)
library("tidyverse")
calls <- read_csv("nyc_rodent_compliants.csv")
df <-
calls %>%
mutate(Date = as.Date(`Created Date`, format = "%m/%d/%Y"),
Month_Year = format(Date, "%m/%y")) %>%
filter(Descriptor == "Rat Sighting",
Month_Year != 01/22, Month_Year >= 01/14) %>%
select( BBL, Borough, `Incident Zip`, Month_Year) %>%
na.omit() %>%
group_by(BBL, Borough, `Incident Zip`, Month_Year) %>%
summarize(count = n()) %>%
filter(BBL != 0, Borough > 10000)
df <- rename(df, Zip  = `Incident Zip` )
df <- separate(df, "Month_Year", c("Month","Year"), sep = "/")
df <- df[order(df$Year),]
write.csv(df, "C:\\Users\\Admin\\Desktop\\dfNYC.csv", row.names=FALSE)
lots_year_1 <- df %>% filter(Year == "14") %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == "15") %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
capture_recapture <- function(year) {
lots_year_1 <- df %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- df %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
library(ggplot2)
ggplot(df, aes(fill= Borough, y = count , x = Year)) +
geom_bar(position = "stack", stat = "identity")
lots_year_18 <- df %>% filter(Year == "18") %>% select(BBL, Borough, Zip)
lots_year_19 <- df %>% filter(Year == "19") %>% select(BBL, Borough, Zip)
common_lots_18_19 <- inner_join(lots_year_18, lots_year_19)
dfManhattan <- df %>% filter(Borough == "MANHATTAN")
dfBronx <- df %>% filter(Borough == "BRONX")
dfBrooklyn <- df %>% filter(Borough == "BROOKLYN")
dfStatenIsland <- df %>% filter(Borough == "STATEN ISLAND")
dfQueens <- df %>% filter(Borough == "QUEENS")
write.csv(dfBronx, "C:\\Users\\Admin\\Desktop\\dfBronx.csv", row.names=FALSE)
write.csv(dfBrooklyn, "C:\\Users\\Admin\\Desktop\\dfBrooklyn.csv", row.names=FALSE)
write.csv(dfManhattan, "C:\\Users\\Admin\\Desktop\\dfManhattan.csv", row.names=FALSE)
write.csv(dfStatenIsland, "C:\\Users\\Admin\\Desktop\\dfStatenIsland.csv", row.names=FALSE)
write.csv(dfQueens, "C:\\Users\\Admin\\Desktop\\dfQueens.csv", row.names=FALSE)
capture_recapture_bronx <- function(year) {
lots_year_1 <- dfBronx %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBronx %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_bronx),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
capture_recapture_brooklyn <- function(year) {
lots_year_1 <- dfBrooklyn %>% filter(Year == year - 1) %>% pull(BBL)
lots_year_2 <- dfBrooklyn %>% filter(Year == year) %>% pull(BBL)
number_in_year_1 <- length(lots_year_1)
number_in_year_2 <- length(lots_year_2)
number_in_year_1_and_2 <- sum(lots_year_1 %in% lots_year_2)
50 * number_in_year_1 * number_in_year_2 / number_in_year_1_and_2
}
qplot(x = factor(2015:2021),
weight = sapply(15:21, capture_recapture_brooklyn),
geom = "bar")  +
labs(x = "year",
y = "estimated rat population") +
theme_bw()
